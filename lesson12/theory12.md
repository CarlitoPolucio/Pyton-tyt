## Рекурсия

Рекурсия - это процесс, в котором функция вызывает саму себя непосредственно или косвенно. 

Рекурсивная функция обычно состоит из двух частей:
- Базовый случай (условие выхода) — предотвращает бесконечную рекурсию.
- Рекурсивный случай — вызов функции с изменёнными аргументами, приближающими к базовому случаю.

Каждый рекурсивный вызов добавляет в стек новый фрейм (кадр) с:
- аргументами функции
- локальными переменными
- точкой возврата

При достижении базового случая стек начинает "схлопываться" по принципу LIFO(Last In, First Out):
- Последний вызов завершается первым.
- Результаты передаются в предыдущий фрейм.

```python
def factorial(n):
    if n == 0:  # Базовый случай
        return 1
    else:       # Рекурсивный случай
        return n * factorial(n - 1)
```

| Вызов         | Возвращаемое значение       | Состояние стека                          |
|---------------|-----------------------------|------------------------------------------|
| `factorial(3)`| `3 * factorial(2)`          | `[factorial(3)]`                         |
| `factorial(2)`| `2 * factorial(1)`          | `[factorial(3), factorial(2)]`           |
| `factorial(1)`| `1 * factorial(0)`          | `[factorial(3), factorial(2), factorial(1)]` |
| `factorial(0)`| `1` (базовый случай)        | Стек начинает схлопываться               |
| `factorial(1)`| `1 * 1 = 1`                 | `[factorial(3), factorial(2)]`           |
| `factorial(2)`| `2 * 1 = 2`                 | `[factorial(3)]`                         |
| `factorial(3)`| `3 * 2 = 6`                 | Стек пуст, возврат `6`                   |

### Типы рекурсий в python
- Прямая рекурсия(Функция вызывает саму себя напрямую.)
```python
def countdown(n):
    if n == 0:
        print("Пуск!")
    else:
        print(n)
        countdown(n - 1)  # Прямой вызов
```
- Косвенная рекурсия(Функция A вызывает B, а B вызывает A)
```python
def is_even(n):
    if n == 0:
        return True
    else:
        return is_odd(n - 1)

def is_odd(n):
    return not is_even(n)
```

### Ограничение глубины
По умолчанию глубина рекурсии ~1000
```python
import sys
sys.setrecursionlimit(5000)  # Увеличиваем лимит
```
Таким образом можно легко забить всю оперативную память стеком вызовов


